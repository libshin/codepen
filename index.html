<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Codepen</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@libshin/codepen@1.0.1/build/codepen.css" />
  </head>

  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://unpkg.com/react@16.8.2/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.8.2/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/manatea@0.3.4/dist/manatea.umd.js"></script>
    <script src="https://unpkg.com/react-manatea@0.4.3/dist/react-manatea.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@libshin/codepen@1.0.1/build/codepen.umd.js"></script>

    <script type="text/react">
      const { createCup } = window['manatea'];
      const { Infuser } = window['react-manatea'];

      const add = tea => Math.max(0, tea + 1);
      const subtract = tea => Math.max(0, tea - 1);

      const counter = createCup(0, "Infuser");

      const increment = () => counter(add);
      const decrement = () => counter(subtract);

      const App = () => (
        <div>
          Named counter with Infuser <br />
          <button onClick={increment}>+</button>
          <button onClick={decrement}>-</button> <br />
          <Infuser cup="Infuser">{tea => tea}</Infuser> <br />
        </div>
      );
    </script>
    <script type="text/react">
      const { createCup } = window['manatea'];
      const { Infuser } = window['react-manatea'];

      const add = tea => Math.max(0, tea + 1);
      const subtract = tea => Math.max(0, tea - 1);

      const counter = createCup(0);

      const increment = () => counter(add);
      const decrement = () => counter(subtract);

      const App = () => (
        <div>
          Unnamed counter with Infuser <br />
          <button onClick={increment}>+</button>
          <button onClick={decrement}>-</button> <br />
          <Infuser cup={counter}>{tea => tea}</Infuser> <br />
        </div>
      );
    </script>
    <script type="text/react">
      const { createCup } = window['manatea'];
      const { infuse } = window['react-manatea'];

      const add = tea => Math.max(0, tea + 1);
      const subtract = tea => Math.max(0, tea - 1);

      const counter = createCup(0, "infuse");

      const increment = () => counter(add);
      const decrement = () => counter(subtract);

      const component = ({ tea }) => (
        <div>
          Named infused counter <br />
          <button onClick={increment}>+</button>
          <button onClick={decrement}>-</button> <br />
          {tea} <br />
        </div>
      );
      const App = infuse("infuse")(component);
    </script>
    <script type="text/react">
      const { createCup } = window['manatea'];
      const { infuse } = window['react-manatea'];

      const add = tea => Math.max(0, tea + 1);
      const subtract = tea => Math.max(0, tea - 1);

      const counter = createCup(0);

      const increment = () => counter(add);
      const decrement = () => counter(subtract);

      const component = ({ tea }) => (
        <div>
          Unnamed infused counter <br />
          <button onClick={increment}>+</button>
          <button onClick={decrement}>-</button> <br />
          {tea} <br />
        </div>
      );
      const App = infuse(counter)(component);
    </script>
    <script type="text/react">
      const { createCup } = window['manatea'];
      const { useInfuser } = window['react-manatea'];

      const add = tea => Math.max(0, tea + 1);
      const subtract = tea => Math.max(0, tea - 1);

      const counter = createCup(0, "useInfuser");

      const App = () => {
        const [tea, setTea] = useInfuser("useInfuser");

        const increment = () => setTea(add(tea));
        const decrement = () => setTea(subtract(tea));

        return (
          <div>
            Named counter with useInfuser <br />
            <button onClick={increment}>+</button>
            <button onClick={decrement}>-</button> <br />
            {tea} <br />
          </div>
        );
      }
    </script>
    <script type="text/react">
      const { createCup } = window['manatea'];
      const { useInfuser } = window['react-manatea'];

      const add = tea => Math.max(0, tea + 1);
      const subtract = tea => Math.max(0, tea - 1);

      const counter = createCup(0);

      const App = () => {
        const [tea, setTea] = useInfuser(counter);

        const increment = () => setTea(add(tea));
        const decrement = () => setTea(subtract(tea));

        return (
          <div>
            Named counter with useInfuser <br />
            <button onClick={increment}>+</button>
            <button onClick={decrement}>-</button> <br />
            {tea} <br />
          </div>
        );
      }
    </script>
  </body>
</html>
